<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¤œé–²å›é¿å¿ƒç†æˆ¦ã‚²ãƒ¼ãƒ </title>
    <!-- Tailwind CSS CDNã‚’ãƒ­ãƒ¼ãƒ‰ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ã‚«ã‚¹ã‚¿ãƒ CSSï¼šæ˜­å’Œãƒ¬ãƒˆãƒ­ãªé›°å›²æ°—ã‚’æ¼”å‡º */
        @import url('https://fonts.googleapis.com/css2?family=Shippori+Mincho&display=swap');
        
        :root {
            --color-paper: #f7f3e8;
            --color-wood: #a0522d;
            --color-ink: #333333;
            --color-danger: #b91c1c;
            --color-supreme: #92400e; /* æœ€é«˜æ¨©åŠ›è€…ç”¨ã®è‰² */
        }

        body {
            font-family: 'Shippori Mincho', 'Inter', sans-serif;
            background-color: #555;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        #app-container {
            background-color: #444;
            max-width: 500px;
            width: 100%;
            border: 10px solid var(--color-wood);
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            padding: 0;
            overflow: hidden;
        }

        #score-board {
            background-color: var(--color-wood);
            color: var(--color-paper);
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            border-bottom: 3px solid #6b4423;
            display: flex;
            justify-content: space-between;
        }

        #game-area {
            background-color: #333;
            padding: 1rem;
        }
        
        #message-box {
            background-color: var(--color-paper);
            color: var(--color-ink);
            min-height: 180px;
            padding: 1rem;
            border: 4px solid var(--color-wood);
            border-radius: 6px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
            margin-bottom: 1rem;
            line-height: 1.6;
            white-space: pre-wrap;
            transition: background-color 0.3s;
        }
        
        .char-box {
            background-color: #222;
            color: var(--color-paper);
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            border-left: 5px solid #e59146;
        }
        
        /* è­¦å¯Ÿå®˜ç³»ï¼ˆå¼•ã£æ›ã‘å«ã‚€ï¼‰ã®ä¼šè©±ãƒœãƒƒã‚¯ã‚¹ã‚’èµ¤ãå¼·èª¿ */
        .police-dialogue-box {
            background-color: #4b0e0e; 
            border-left: 5px solid var(--color-danger);
        }
        
        /* æ±æ¢è‹±æ©Ÿå°‚ç”¨ã®ä¼šè©±ãƒœãƒƒã‚¯ã‚¹ã‚’é‡‘è‰²ã§å¼·èª¿ */
        .supreme-dialogue-box {
            background-color: var(--color-supreme); 
            border-left: 5px solid #facc15;
            color: white;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 5px #facc15, 0 0 10px #facc15; }
            50% { box-shadow: 0 0 10px #facc15, 0 0 20px #facc15; }
            100% { box-shadow: 0 0 5px #facc15, 0 0 10px #facc15; }
        }

        .button-style {
            font-family: 'Shippori Mincho', sans-serif;
            background-color: #e59146;
            color: var(--color-ink);
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            border: 2px solid #b76c31;
            box-shadow: 0 4px 0 #b76c31;
            transition: all 0.1s ease;
            width: 100%;
            margin-bottom: 0.5rem;
            text-align: left;
        }

        .button-style:active {
            box-shadow: 0 0 0 #b76c31;
            transform: translateY(4px);
        }

        .button-danger {
            background-color: var(--color-danger);
            color: white;
            box-shadow: 0 4px 0 #9f1616;
            border-color: #9f1616;
        }

        .button-danger:active {
            box-shadow: 0 0 0 #9f1616;
        }
        
        .button-neutral {
             background-color: #9ca3af;
             box-shadow: 0 4px 0 #6b7280;
             border-color: #6b7280;
        }
        
        .button-neutral:active {
            box-shadow: 0 0 0 #6b7280;
        }
        
        .game-over {
            background-color: #fcebeb;
        }
        
        /* ã‚¢ã‚¤ã‚³ãƒ³ */
        .icon {
            display: inline-block;
            font-size: 1.2em;
            margin-right: 8px;
        }
        
    </style>
</head>
<body>

    <div id="app-container" class="shadow-lg">
        <!-- ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰ -->
        <div id="score-board">
            <div class="flex items-center space-x-2">
                <span class="text-yellow-300">è²¢çŒ®ãƒã‚¤ãƒ³ãƒˆ:</span>
                <span id="score" class="text-xl font-extrabold">0</span>
            </div>
            <div class="flex items-center space-x-2">
                <span class="text-red-400">ãƒ©ã‚¦ãƒ³ãƒ‰:</span>
                <span id="round-count" class="text-xl">0 / 10</span>
            </div>
        </div>
        
        <div id="game-area">
            <!-- å‡ºä¼šã£ãŸäººç‰©ã®ä¼šè©± -->
            <div id="character-info" class="char-box">
                <p class="font-bold text-lg mb-1" id="char-title">æš—ãŒã‚Šã‹ã‚‰ç¾ã‚ŒãŸäººç‰©...</p>
                <p id="char-dialogue" class="text-sm">...</p>
            </div>
            
            <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ (çµæœã‚„è§£èª¬) -->
            <div id="message-box" class="text-base">
                ã‚²ãƒ¼ãƒ é–‹å§‹...
            </div>

            <!-- ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
            <div id="choice-buttons" class="flex flex-col space-y-2">
                <!-- é¸æŠè‚¢ãŒã“ã“ã«å…¥ã‚‹ -->
            </div>
        </div>

    </div>

    <script>
        // --- è¨­å®šã¨ãƒ‡ãƒ¼ã‚¿ ---
        const MESSAGE_BOX = document.getElementById('message-box');
        const SCORE_ELEM = document.getElementById('score');
        const ROUND_ELEM = document.getElementById('round-count');
        const BUTTONS_CONTAINER = document.getElementById('choice-buttons');
        const CHAR_INFO = document.getElementById('character-info');
        const CHAR_DIALOGUE = document.getElementById('char-dialogue');
        const CHAR_TITLE = document.getElementById('char-title');
        
        const MAX_ROUNDS = 10;
        // ğŸš¨ æ±æ¢è‹±æ©Ÿã®å‡ºç¾ç¢ºç‡ 15% -> 5% ã«å¤‰æ›´
        const TOJO_PROBABILITY = 0.05; 

        // ğŸš¨ å¤‰æ›´å¾Œã®ä½œå“ãƒ‡ãƒ¼ã‚¿
        const ITEMS = {
            FORBIDDEN: [
                { name: 'ã€èŸ¹å·¥èˆ¹ã€', type: 'FORBIDDEN', icon: 'ğŸš¢' }, // ãƒ—ãƒ­ãƒ¬ã‚¿ãƒªã‚¢æ–‡å­¦/ç¤¾ä¼šä¸»ç¾©çš„ç¤ºå”†
                { name: 'ã€ç´°é›ªã€', type: 'FORBIDDEN', icon: 'ğŸ‘˜' }, // æˆ¦æ™‚ä¸‹ã«ä¸é©åˆ‡ãªè¯ç¾ãªæå†™
                { name: 'ã€ç”Ÿãã¦ã„ã‚‹å…µéšŠã€', type: 'FORBIDDEN', icon: 'ğŸ’€' }, // çš‡è»æ‰¹åˆ¤/åæˆ¦
                { name: 'ã€éè»å›½ä¸»ç¾©è«–ã€', type: 'FORBIDDEN', icon: 'ğŸš«' }  // è»å›½ä¸»ç¾©æ‰¹åˆ¤/ä½“åˆ¶æ‰¹åˆ¤
            ],
            SAFE: [
                { name: 'ã€éº¦ã¨å…µéšŠã€', type: 'SAFE', icon: 'ğŸ–ï¸' }, // æˆ¦äº‰æ–‡å­¦
                { name: 'ã€ã‚¢ãƒƒãƒ„å³¶ç‰ç •ã®å›³ã€', type: 'SAFE', icon: 'ğŸ–¼ï¸' }, // æˆ¦äº‰ç”»
                { name: 'ã€æµ·ã‚†ã‹ã°ã€', type: 'SAFE', icon: 'ğŸ¶' }, // è»æ­Œ
                { name: 'ã€æ¡ƒå¤ªéƒã€€æµ·ã®ç¥å…µã€', type: 'SAFE', icon: 'ğŸ‘' }, // å›½ç­–ã‚¢ãƒ‹ãƒ¡
                { name: 'ã€äº”äººã®æ–¥å€™å…µã€', type: 'SAFE', icon: 'ğŸ¥' } // å›½ç­–æ˜ ç”»
            ]
        };
        
        // å…¨ã¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä¸€ã¤ã®ãƒªã‚¹ãƒˆã«çµ±åˆ
        const ALL_ITEMS = [...ITEMS.FORBIDDEN, ...ITEMS.SAFE];

        // äººç‰©ãƒ‡ãƒ¼ã‚¿ã¨ãƒ«ãƒ¼ãƒ« (å¤‰æ›´ãªã—)
        const CHARACTERS_DATA = {
            // å£èª¿ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ (è­¦å®˜ã®ã€Œè­¦å®˜ã‚‰ã—ã•ã€ã‚’æ’é™¤ã—ã€ä¸€èˆ¬äººã¨åŒºåˆ¥ã—ã«ããã™ã‚‹)
            dialogues: {
                // è­¦å®˜ãƒ»å„ªã—ãã†ãªè­¦å®˜ (æ›–æ˜§ã§ã€è³ªå•ã®æ„å›³ãŒåˆ†ã‹ã‚Šã«ãã„å£èª¿ã«å¤‰æ›´)
                POLICE: [
                    'ã€ŒãŠå‰ã€ã“ã‚“ãªæ™‚é–“ã«ä½•ã‚’é‹ã‚“ã§ã„ã‚‹ã€‚æ€ªã—ã„å‹•ãã‚’ã™ã‚‹ãªã€‚æ‰€å±ã¨ç›®çš„ã‚’ç”³å‘Šã—ã‚ï¼ã€', 
                    'ã€Œã™ã¿ã¾ã›ã‚“ã€ã¡ã‚‡ã£ã¨ãŠæ™‚é–“ã‚’ã€‚ä¸å¯©ç‰©ãŒãªã„ã‹ã€ç°¡å˜ã«è¦‹ã›ã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€', 
                    'ã€ŒãŠå‰ã®é¡”ã€è¦‹æ…£ã‚Œãªã„ãªã€‚ã©ã“ã‹ã‚‰æ¥ã¦ã€ã©ã“ã¸è¡Œãã€‚æ­£ç›´ã«ç­”ãˆã‚Œã°ã™ãã«è§£æ”¾ã™ã‚‹ã€‚ã€',
                    'ã€Œå¤œé–“ã®å¤–å‡ºã¯è¨±å¯ã•ã‚Œã¦ã„ã‚‹ã®ã‹ï¼Ÿè·ç‰©ã¯é‡ãã†ã ãŒã€ä½•ã‚’æŒã£ã¦ã„ã‚‹ã‚“ã ã€‚ã€',
                    'ã€Œã“ã®å…ˆã®é“ã¯æš—ã„ãã€‚è·ç‰©ãŒé‡ãã†ã ãŒã€æ‰‹ä¼ãŠã†ã‹ï¼Ÿè¦ªåˆ‡å¿ƒã ã‚ˆã€‚ã€', 
                    'ã€Œã‚ã®ã€ã“ã®è¾ºã§æ¢ã—ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã‚“ã ãŒã€ä½•ã‹å¤‰ã‚ã£ãŸã‚‚ã®ã‚’è¦‹ãªã‹ã£ãŸã‹ï¼Ÿã€', 
                    'ã€Œã“ã‚“ãªå¯’ã„å¤œã«å¤§å¤‰ã ã­ã€‚å›ã®æŒã£ã¦ã„ã‚‹ã‚‚ã®ãŒã€å›½ã®ãŸã‚ã«ãªã‚‹ã‚‚ã®ã ã¨ä¿¡ã˜ã¦ã„ã‚‹ã‚ˆã€‚ã€', 
                    'ã€Œã“ã®å ´æ‰€ã¯å°‘ã—å±é™ºã ã€‚å›ãŒæŒã£ã¦ã„ã‚‹ã‚‚ã®ã‚’è¦‹ã›ã¦ãã‚Œã‚Œã°ã€ç§ãŒä»£ã‚ã‚Šã«é‹ã‚“ã§ã‚ã’ã‚ˆã†ã€‚ã€', 
                    'ã€ŒãŠã„ã€ãã“ã®å›ï¼é“ã‚’å°‹ã­ãŸã„ã‚“ã ãŒã€æ€¥ãã®ç”¨ã‹ï¼Ÿã€', 
                    'ã€Œã¡ã‚‡ã£ã¨ã”å”åŠ›é¡˜ã„ãŸã„ã€‚æ€ªã—ã„è€…ãŒã„ã‚‹ã¨é€šå ±ãŒã‚ã£ãŸã€‚å›ã§ã¯ãªã„ã¨ã„ã„ãŒã€‚ã€'
                ],
                // ä¾é ¼äºº (åˆ‡è¿«ã—ã¦ã„ã‚‹ãŒã€ä¾é ¼ã‚’åŒ‚ã‚ã›ãªã„å£èª¿)
                CLIENT: [
                    'ã€Œã‚ˆã†ã‚„ãä¼šãˆãŸã€‚éšåˆ†ã¨é…ã„ã˜ã‚ƒãªã„ã‹ã€‚ã“ã‚Œã§å…¨ã¦ãŒçµ‚ã‚ã‚‹ã‚“ã ã€‚æ—©ãã€‚ã€',
                    'ã€Œãˆãˆã€é€£çµ¡ã—ãŸè€…ã‚ˆã€‚ã“ã®é–“ã®è©±ã€‚å‘¨å›²ã«æ°—ã‚’ã¤ã‘ã¦ã€‚ã“ã“ã˜ã‚ƒé•·è©±ã¯ã§ããªã„ã€‚ã€',
                    'ã€Œæœ¬å½“ã«æ¥ã¦ãã‚Œã‚‹ãªã‚“ã¦ã€‚ã“ã‚Œã•ãˆã‚ã‚Œã°ã€ã‚ã®äººãŸã¡ã‚’æ•‘ãˆã‚‹ã€‚æ„Ÿè¬ã™ã‚‹ã€‚ã€',
                    'ã€Œ...ï¼ˆå‘¨å›²ã‚’è­¦æˆ’ã—ãªãŒã‚‰ã€ã“ã¡ã‚‰ã«ä¸€ç¥ã‚’ãã‚Œã‚‹ï¼‰ã€‚æ€¥ã„ã§ã„ã‚‹ã‚“ã ã‚ã†ãªï¼Ÿã€',
                    'ã€Œå¯’ã„ã‚ã­...ã€‚æ‰‹ãŒã‹ã˜ã‹ã‚“ã§ã—ã¾ã†ã€‚ã“ã‚Œã‚’å¾…ã£ã¦ã„ãŸã®ã‚ˆã€‚ã€',
                    'ã€Œé“ã«è¿·ã£ãŸã®ã‹ã¨æ€ã£ãŸã€‚æ™‚é–“ãŒç„¡ã„ã®ã€‚æ—©ãç§ã®æ‰‹ã‹ã‚‰é›¢ã—ã¦ãã‚Œã€‚ã€',
                    'ã€Œ...ï¼ˆå’³æ‰•ã„ã‚’ã™ã‚‹ï¼‰ã€‚å¤§äº‹ãªå“ã€å¿˜ã‚Œãšã«æŒã£ã¦ãã¦ãã‚ŒãŸã‹ï¼Ÿã€',
                    'ã€ŒãŠå‰ã«ã¯å±é™ºãªå½¹ç›®ã‚’é ¼ã‚“ã§ã—ã¾ã£ãŸã€‚ã ãŒã€ã©ã†ã‹é ¼ã‚€ã€‚ã“ã‚Œã‚’å±Šã‘ã•ã›ã¦ãã‚Œã€‚ã€',
                    'ã€Œå¤œã¯ç›®ãŒåŠ¹ã‹ãªã„ã‹ã‚‰ãªã€‚é ¼ã‚€ã€é–“é•ã„ãªãå±Šã‘ã¦ãã‚Œã€‚ç´„æŸé€šã‚Šã«ã€‚ã€',
                    'ã€Œç§ã¯å£ãŒå …ã„ã€‚ãŠå‰ã‚‚ãã†ã ã‚ã†ã€‚å“ã‚’äº¤æ›ã—ã€é€Ÿã‚„ã‹ã«ç«‹ã¡å»ã‚Œã€‚ã€'
                ],
                // ä¸€èˆ¬äºº (ä¸­ç«‹çš„/ä¸æ©Ÿå«Œ/ç„¡é–¢å¿ƒãªå£èª¿)
                GENERAL: [
                    'ã€Œã‚ã‚‰ã€ã©ã¡ã‚‰æ§˜ï¼Ÿã“ã‚“ãªæ™‚é–“ã«ã€‚è¿‘æ‰€ã®äººã‹ã—ã‚‰ï¼Ÿç§ã€ä»Šæ€¥ã„ã§ã„ã‚‹ã®ã€‚ã€',
                    'ã€Œã¡ã‚‡ã£ã¨ã€é“ã‚’å¡ã„ã§ã‚“ã˜ã‚ƒãªã„ã‚ˆï¼ä½•ã ã‹ä¸æ°—å‘³ãªé¡”ã‚’ã—ã¦ã‚‹ã­ã€ã•ã£ã•ã¨ã©ã‘ï¼ã€',
                    'ã€Œã“ã‚“ãªå¤œæ›´ã‘ã«ã€ä½•ã‚’ã“ãã“ãã¨ã€‚ã¾ã‚ã€ç§ã«ã¯é–¢ä¿‚ãªã„ã‘ã©ã­ã€‚ã€',
                    'ã€Œ...ï¼ˆé¡”ã‚’è¦‹ãšã€è¶³æ—©ã«ç«‹ã¡å»ã‚ã†ã¨ã—ã¦ã„ã‚‹ï¼‰...ã€',
                    'ã€ŒãŠã‚„ã€ã©ã¡ã‚‰ã•ã‚“ã‹ã­ï¼Ÿã“ã‚“ãªå¤œæ›´ã‘ã«ã€‚ä½•ã‹ç§ã«ç”¨ã§ã‚‚ã‚ã‚‹ã®ã‹ã­ï¼Ÿã€',
                    'ã€Œé“ã®çœŸã‚“ä¸­ã§çªã£ç«‹ã£ã¦...é‚ªé­”ã ã‚ˆã€‚ã¾ã£ãŸãã€è¿·æƒ‘ãªè©±ã ã€‚ã€',
                    'ã€Œã‚ãªãŸã€ãã‚“ãªå¤§ããªè·ç‰©ã‚’æŒã£ã¦ã€‚å¤§å¤‰ã­ã€‚ã§ã‚‚ã€ç§ã«ã¯ç”¨ã¯ãªã„ã‚ã€‚ã€',
                    'ã€Œã†ã‚ã£ã€æš—ãã¦ã³ã£ãã‚Šã—ãŸã€‚äººé•ã„ãªã‚‰æ—©ãã©ã„ã¦ãã‚Œã‚‹ï¼Ÿã€',
                    'ã€Œã‚ã®ã€ã™ã„ã¾ã›ã‚“ã€‚ä½•ã‹ãŠæ¢ã—ã§ã™ã‹ï¼Ÿç§ã¯ãŸã å¸°ã‚‹ã ã‘ãªã®ã§ã™ãŒ...ã€‚ã€',
                    'ã€Œè¿‘é ƒã€ç‰©é¨’ã ã‹ã‚‰ã­ã€‚æ—©ãå®¶ã«å¸°ã‚‹ã®ãŒä¸€ç•ªã ã‚ˆã€‚ã€'
                ],
                // æ±æ¢è‹±æ©Ÿã¯å›ºå®š
                TOJO: [
                    'ã€Œ...ç§ãŒç›´ã€…ã«æ¤œé–²ã™ã‚‹ã€‚ã“ã®ä¸–ã«ç§ã‚’æ¬ºã‘ã‚‹ã‚‚ã®ã¯ãªã„ã€‚ã€'
                ]
            },
            
            // ãƒ«ãƒ¼ãƒ«ã¨å‡ºç¾ç¢ºç‡
            definitions: [
                // 1. è­¦å®˜ (é€šå¸¸) - å¨åœ§çš„ãªå£èª¿ (20%)
                { type: 'police_normal', prob: 0.2, name: 'æ¤œé–²å®˜ (è­¦å®˜)', dialogueType: 'POLICE', isPolice: true,
                    rules: {
                        FORBIDDEN: { result: 'gameover', text: 'ã€Œç™ºç¦æ›¸ç±ï¼è²´æ§˜ã€ç¾è¡ŒçŠ¯é€®æ•ã ï¼å‡¦åˆ‘ï¼ã€' },
                        SAFE: { result: 'points', value: 3, text: 'ã€Œãµã‚€ã€ç«‹æ´¾ãªæˆ¦æ„é«˜æšä½œå“ã ã€‚ã”è‹¦åŠ´ã€å¤§å„€ã§ã‚ã‚‹ã€‚ã€' },
                        HIDE: { result: 'points', value: -1, text: 'ã€Œæ…‹åº¦ãŒæ€ªã—ã„ãªã€‚ä½•ã‚‚æŒã£ã¦ã„ãªã„ã‚ˆã†ã ãŒã€æ¸›ç‚¹ã ã€‚ã€' }
                    }
                },
                // 2. è­¦å®˜ (å¼•ã£æ›ã‘) - å„ªã—ãã†ãªå£èª¿ã§æ¢ã‚‹ (10%)
                { type: 'police_gentle', prob: 0.1, name: 'å·¡å›è­¦å®˜ (å¼•ã£æ›ã‘)', dialogueType: 'POLICE', isPolice: true,
                    rules: {
                        FORBIDDEN: { result: 'gameover', text: 'ã€Œï¼ˆãƒ‹ãƒ¤ãƒªï¼‰é¨™ã•ã‚Œãªã„ãã€ç™ºç¦æ›¸ç±ï¼æ†²å…µã ï¼å‡¦åˆ‘ï¼ã€' },
                        SAFE: { result: 'points', value: 3, text: 'ã€Œæ„›å›½å¿ƒã€å¤§å¤‰çµæ§‹ã€‚ã“ã‚Œã‹ã‚‰ã‚‚å°½åŠ›ã—ã¦ãã‚ŒãŸã¾ãˆã€‚ã€' },
                        HIDE: { result: 'points', value: -1, text: 'ã€Œã›ã£ã‹ãå£°ã‚’ã‹ã‘ãŸã®ã«ã€ç„¡æ„›æƒ³ã ã­ã€‚ä¸å¯©ã ã¨å ±å‘Šã—ã¦ãŠãã€‚ã€' }
                    }
                },
                // 3. ä¾é ¼äºº (40%)
                { type: 'client', prob: 0.4, name: 'ä¾é ¼äºº', dialogueType: 'CLIENT', isPolice: false,
                    rules: {
                        FORBIDDEN: { result: 'points', value: 5, text: 'ã€Œ...æ„Ÿè¬ã™ã‚‹ã€‚ã“ã‚Œã§ç§ãŸã¡ã®è¨ˆç”»ã¯é€²ã‚€ã€‚ã€' },
                        SAFE: { result: 'points', value: -1, text: 'ã€Œ...ä½•ã ã“ã®æˆ¦æ„é«˜æšã®ã‚´ãƒŸã¯ã€‚ç§ã‚’èª°ã ã¨æ€ã£ã¦ã„ã‚‹ï¼ï¼Ÿé€šå ±ã™ã‚‹ãï¼ã€' },
                        HIDE: { result: 'gameover', text: 'ã€Œè£åˆ‡ã£ãŸãªï¼ç´„æŸã‚’ç ´ã‚‹ã¨ã¯ï¼é€šå ±ã ï¼å‡¦åˆ‘ï¼ã€' }
                    }
                },
                // 4. ä¸€èˆ¬äºº (20%) - ãƒªã‚¹ã‚¯å°
                { type: 'general', prob: 0.2, name: 'ä¸€èˆ¬äºº', dialogueType: 'GENERAL', isPolice: false,
                    rules: {
                        FORBIDDEN: { result: 'points', value: -1, text: 'ã€Œãã®æœ¬ã¯...ï¼ï¼Ÿå¤‰ãªã‚‚ã®ã‚’æ¸¡ã—ã¤ã‘ãªã„ã§ã‚ˆï¼ç§ã¯çŸ¥ã‚‰ãªã„ï¼ã€' },
                        SAFE: { result: 'points', value: 1, text: 'ã€Œç«‹æ´¾ãªç”»å ±ã­ã€‚ã‚ã‚ŠãŒã¨ã†ã€å®‰å¿ƒã—ãŸã‚ã€‚ã€' },
                        HIDE: { result: 'points', value: 0, text: 'ã€Œãƒãƒƒ...é“ã‚’å¡ããªã€‚ã¡ã‚‡ã£ã¨ã‚¤ãƒ©ã‚¤ãƒ©ã™ã‚‹ã‚ã­ã€‚ã€' }
                    }
                },
                 // 5. å½è£…è­¦å®˜ (10%) - ä¸€èˆ¬äººã®å£èª¿ã§æ¥ã—ã¦ãã‚‹è­¦å®˜
                { type: 'police_disguised', prob: 0.1, name: 'ä¸€èˆ¬äººé¢¨ã®äººç‰©', dialogueType: 'GENERAL', isPolice: true,
                    rules: {
                        FORBIDDEN: { result: 'gameover', text: 'ã€Œä½•ã‚’éš ãã†ã€‚ç™ºç¦æ›¸ç±ï¼æ†²å…µã ï¼å‡¦åˆ‘ï¼ã€' },
                        SAFE: { result: 'points', value: 3, text: 'ã€Œï¼ˆç¬‘ã„ï¼‰...è¦‹äº‹ãªæ„›å›½å¿ƒã ã€‚è¤’ã‚ã¦ãŠã“ã†ã€‚ã€' },
                        HIDE: { result: 'points', value: -1, text: 'ã€Œï¼ˆãŸã‚æ¯ï¼‰...ä¸å¯©ãªè¡Œå‹•ã€‚æ†²å…µéšŠã«å ±å‘Šã¯ã—ã¦ãŠããã€‚ã€' }
                    }
                },
                // 6. æ±æ¢è‹±æ©Ÿ (5%) - ç‰¹æ®Šãªå¼·åˆ¶ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
                { type: 'tojo', prob: TOJO_PROBABILITY, name: 'æ±æ¢è‹±æ©Ÿ', dialogueType: 'TOJO', isPolice: true,
                    rules: {
                        FORBIDDEN: { result: 'gameover_force', text: 'ã€Œå•ç­”ç„¡ç”¨ï¼å›½è³Šã‚ãŒï¼ã€' },
                        SAFE: { result: 'gameover_force', text: 'ã€Œå•ç­”ç„¡ç”¨ï¼å›½è³Šã‚ãŒï¼ã€' },
                        HIDE: { result: 'gameover_force', text: 'ã€Œå•ç­”ç„¡ç”¨ï¼å›½è³Šã‚ãŒï¼ã€' }
                    }
                }
            ]
        };

        let gameState = {
            score: 0,
            currentRound: 0,
            currentPerson: null,
            gameActive: false,
            usedDialogues: {
                'POLICE': new Set(),
                'CLIENT': new Set(),
                'GENERAL': new Set(),
            },
            roundSequence: [], 
            roundItems: [] // ã“ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã§æç¤ºã•ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ ¼ç´
        };

        // --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ---
        function getRandomItem(type) {
            const list = ITEMS[type];
            return list[Math.floor(Math.random() * list.length)];
        }
        
        // ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ã‚»ãƒªãƒ•ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã§å–å¾—
        function getUniqueDialogue(dialogueType) {
            // æ±æ¢è‹±æ©Ÿã®å ´åˆã¯å›ºå®šã‚»ãƒªãƒ•ã‚’è¿”ã™
            if (dialogueType === 'TOJO') {
                return CHARACTERS_DATA.dialogues.TOJO[0];
            }

            const allDialogues = CHARACTERS_DATA.dialogues[dialogueType.toUpperCase()];
            const unusedDialogues = allDialogues.filter(d => !gameState.usedDialogues[dialogueType.toUpperCase()].has(d));
            
            if (unusedDialogues.length === 0) {
                // ã‚»ãƒªãƒ•ãŒæ¯æ¸‡ã—ãŸã‚‰ã€æœ€ã‚‚å¤ã„ã‚»ãƒªãƒ•ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦å†åˆ©ç”¨
                gameState.usedDialogues[dialogueType.toUpperCase()].clear();
                return getUniqueDialogue(dialogueType); // å†å¸°å‘¼ã³å‡ºã—
            }

            const dialogue = unusedDialogues[Math.floor(Math.random() * unusedDialogues.length)];
            gameState.usedDialogues[dialogueType.toUpperCase()].add(dialogue);
            return dialogue;
        }

        // 10ãƒ©ã‚¦ãƒ³ãƒ‰åˆ†ã®äººç‰©ã‚’ç¢ºç‡ã«åŸºã¥ã„ã¦äº‹å‰ã«æ±ºå®šã™ã‚‹
        function generateRoundSequence() {
            gameState.roundSequence = [];
            for (let i = 0; i < MAX_ROUNDS; i++) {
                // æœ€åˆã«æ±æ¢è‹±æ©Ÿã®æŠ½é¸ã‚’è¡Œã† (5%ã®ç‹¬ç«‹æŠ½é¸)
                if (Math.random() < TOJO_PROBABILITY) {
                    gameState.roundSequence.push(CHARACTERS_DATA.definitions.find(d => d.type === 'tojo'));
                    continue; // ä»–ã®äººç‰©ã®æŠ½é¸ã¯è¡Œã‚ãªã„
                }
                
                // é€šå¸¸ã®äººç‰©ã®æŠ½é¸
                const normalDefinitions = CHARACTERS_DATA.definitions.filter(d => d.type !== 'tojo');
                const totalProb = normalDefinitions.reduce((sum, d) => sum + d.prob, 0);
                const rand = Math.random() * totalProb;
                
                let cumulativeProb = 0;
                let personDefinition = null;

                for (const def of normalDefinitions) {
                    cumulativeProb += def.prob;
                    if (rand < cumulativeProb) {
                        personDefinition = def;
                        break;
                    }
                }
                if (!personDefinition) personDefinition = normalDefinitions[0]; // safety fallback
                gameState.roundSequence.push(personDefinition);
            }
        }

        // --- ã‚²ãƒ¼ãƒ é–‹å§‹/ãƒªã‚»ãƒƒãƒˆ ---
        function startGame() {
            gameState.score = 0;
            gameState.currentRound = 0;
            gameState.gameActive = true;
            gameState.usedDialogues = { 'POLICE': new Set(), 'CLIENT': new Set(), 'GENERAL': new Set() };
            generateRoundSequence(); // æ–°ã—ã„ãƒ©ã‚¦ãƒ³ãƒ‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ç”Ÿæˆ

            MESSAGE_BOX.classList.remove('game-over');
            CHAR_INFO.classList.remove('police-dialogue-box', 'supreme-dialogue-box');
            
            updateUI();
            
            showMessage(`
ã€æ¥µç§˜ä»»å‹™é–‹å§‹ã€‘
è²´æ–¹ã¯ã€è‡ªç”±ãªæ€æƒ³ã‚’é‹ã¶åœ°ä¸‹ã®é…é”äººã€‚ç›®ã®å‰ã®äººç‰©ãŒèª°ã‹ã‚’è¦‹æŠœã‘ï¼
<span class="font-bold text-red-500">â€»æ¸¡ã™ä½œå“åã®ã¿ã‚’ç¢ºèªã§ãã¾ã™ã€‚</span>
ã‚»ãƒªãƒ•ã«éš ã•ã‚ŒãŸçœŸæ„ã¨ä½œå“åã‹ã‚‰ã€<span class="font-bold">ã€Œç™ºç¦å“ã€ã‹ã€Œæ­£ã—ã„å“ã€ã‹ã‚’æ¨æ¸¬</span>ã—ã€è¡Œå‹•ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚
æ±æ¢è‹±æ©Ÿå‡ºç¾ç¢ºç‡: 5%
            
å…¨${MAX_ROUNDS}ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã™ã€‚
            `);
            CHAR_TITLE.textContent = 'æš—ãŒã‚Šã‹ã‚‰ç¾ã‚ŒãŸäººç‰©...';
            CHAR_DIALOGUE.textContent = 'ä»»å‹™é–‹å§‹ã‚’å¾…ã¦ã€‚';
            setButtons([
                { text: 'å‡ºç™ºã™ã‚‹', action: nextStep }
            ]);
        }

        // --- UIæ›´æ–° ---
        function updateUI() {
            SCORE_ELEM.textContent = gameState.score;
            ROUND_ELEM.textContent = `${gameState.currentRound} / ${MAX_ROUNDS}`;
        }

        function showMessage(text) {
            MESSAGE_BOX.innerHTML = text;
        }

        function setButtons(buttons) {
            BUTTONS_CONTAINER.innerHTML = '';
            buttons.forEach(btn => {
                const button = document.createElement('button');
                button.className = `button-style ${btn.class || ''}`;
                // ã‚¢ã‚¤ã‚³ãƒ³ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤ºã€‚ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¿ã‚¤ãƒ—(FORBIDDEN/SAFE)ã¯è¡¨ç¤ºã—ãªã„
                button.innerHTML = `<span class="icon">${btn.icon || ''}</span>${btn.text}`; 
                button.onclick = btn.action;
                BUTTONS_CONTAINER.appendChild(button);
            });
        }
        
        function showCharacter(person) {
            // ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚»ãƒªãƒ•ã‚’å–å¾—ã—ã€ä½¿ç”¨æ¸ˆã¿ã¨ã—ã¦è¨˜éŒ²
            const dialogueText = getUniqueDialogue(person.dialogueType);
            CHAR_DIALOGUE.textContent = dialogueText;
            
            CHAR_TITLE.textContent = (person.type === 'tojo') ? 'ã€ï¼ï¼éå¸¸è­¦æˆ’ï¼ï¼ã€‘' : 'æš—ãŒã‚Šã‹ã‚‰ç¾ã‚ŒãŸäººç‰©...';

            // ãƒœãƒƒã‚¯ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
            CHAR_INFO.classList.remove('police-dialogue-box', 'supreme-dialogue-box');
            if (person.type === 'tojo') {
                CHAR_INFO.classList.add('supreme-dialogue-box');
            } else if (person.isPolice) {
                CHAR_INFO.classList.add('police-dialogue-box');
            }
        }

        // --- ã‚²ãƒ¼ãƒ é€²è¡Œ ---
        
        // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆäººç‰©ã¨ã®é­é‡ï¼‰
        function nextStep() {
            if (gameState.currentRound >= MAX_ROUNDS) {
                endGame();
                return;
            }
            
            gameState.currentRound++;
            
            // äº‹å‰æ±ºå®šã•ã‚ŒãŸäººç‰©ã‚’å–å¾—
            const personDefinition = gameState.roundSequence[gameState.currentRound - 1];
            gameState.currentPerson = personDefinition;

            // æ±æ¢è‹±æ©Ÿã ã£ãŸå ´åˆã¯å¼·åˆ¶ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã®å‡¦ç†ã¸
            if (personDefinition.type === 'tojo') {
                gameOverForce(personDefinition.name, getUniqueDialogue(personDefinition.dialogueType));
                return;
            }

            // é€šå¸¸ã®äººç‰©ã®ã‚»ãƒªãƒ•ã¨ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            showCharacter(personDefinition);

            showMessage(`
ã€ç¬¬${gameState.currentRound}ãƒ©ã‚¦ãƒ³ãƒ‰ã€‘
å¤œã®æš—ãŒã‚Šã‹ã‚‰ã€ç›®ã®å‰ã«èª°ã‹ãŒç¾ã‚ŒãŸã€‚
ç›¸æ‰‹ã®ã€ŒçœŸæ„ã€ã‚’èª­ã¿å–ã‚Œã€‚
            `);

            // é¸æŠè‚¢ã®ç”Ÿæˆ
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«æ¸¡ã™ã‚¢ã‚¤ãƒ†ãƒ ã¯ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã°ã‚Œã‚‹ãŒã€ãã‚ŒãŒä½•ã‚¿ã‚¤ãƒ—ã‹ã¯æ¸¡ã•ãªã„
            const item1 = ALL_ITEMS[Math.floor(Math.random() * ALL_ITEMS.length)];
            let item2;
            do {
                item2 = ALL_ITEMS[Math.floor(Math.random() * ALL_ITEMS.length)];
            } while (item1.name === item2.name); // åŒã˜ä½œå“åã«ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹

            // ã“ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã§ä½¿ç”¨ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¨˜éŒ²ï¼ˆçµæœåˆ¤å®šã®ãŸã‚ï¼‰
            gameState.roundItems = [item1, item2];


            const actionButtons = [
                // 1. ã‚¢ã‚¤ãƒ†ãƒ 1ã‚’æ¸¡ã™
                {
                    text: `${item1.icon} ${item1.name}ã‚’æ¸¡ã™`,
                    action: () => handleAction(item1.type), // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã¯è¦‹ãˆãªã„ãŒã€ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚¿ã‚¤ãƒ—ã§åˆ¤å®š
                    icon: ''
                },
                // 2. ã‚¢ã‚¤ãƒ†ãƒ 2ã‚’æ¸¡ã™
                {
                    text: `${item2.icon} ${item2.name}ã‚’æ¸¡ã™`,
                    action: () => handleAction(item2.type), // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã¯è¦‹ãˆãªã„ãŒã€ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚¿ã‚¤ãƒ—ã§åˆ¤å®š
                    icon: ''
                },
                // 3. ä½•ã‚‚æ¸¡ã•ãªã„
                {
                    text: 'ğŸ¤« ä½•ã‚‚æ¸¡ã•ãšã€ã‚„ã‚Šéã”ã™',
                    action: () => handleAction('HIDE'),
                    icon: '',
                    class: 'button-neutral'
                }
            ];
            // ã‚¢ã‚¤ã‚³ãƒ³ã‚’ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«çµ±åˆã—ãŸãŸã‚ã€iconãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ç©ºã«ã™ã‚‹
            actionButtons[0].icon = actionButtons[1].icon = actionButtons[2].icon = ''; 

            setButtons(actionButtons);
            updateUI();
        }

        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è¡Œå‹•å‡¦ç†
        function handleAction(choiceType) {
            const person = gameState.currentPerson;
            // æ¸¡ã™ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¿ã‚¤ãƒ—ï¼ˆFORBIDDEN, SAFE, HIDEï¼‰ã«åŸºã¥ã„ã¦ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨
            const result = person.rules[choiceType];
            
            // é€šå¸¸ã®ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼åˆ¤å®š
            if (result.result === 'gameover') {
                gameOver(person.name, result.text);
                return;
            }

            // ãƒã‚¤ãƒ³ãƒˆå¤‰å‹•
            const pointChange = result.value;
            gameState.score += pointChange;
            
            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
            let messageText = '';
            let icon = '';
            let color = 'text-white';
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«æ¸¡ã—ãŸã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¿ã‚¤ãƒ—ã‚’ä¼ãˆã‚‹ (è§£èª¬ã¨ã—ã¦)
            let itemTypeDescription = '';
            if (choiceType === 'FORBIDDEN') {
                itemTypeDescription = 'ï¼ˆæ¸¡ã—ãŸä½œå“ã¯ã€ç™ºç¦æ›¸ç±ã€‘ã ã£ãŸï¼‰';
            } else if (choiceType === 'SAFE') {
                itemTypeDescription = 'ï¼ˆæ¸¡ã—ãŸä½œå“ã¯ã€æˆ¦æ„é«˜æšä½œå“ã€‘ã ã£ãŸï¼‰';
            } else {
                itemTypeDescription = ''; // HIDEã®å ´åˆ
            }


            if (pointChange > 0) {
                icon = 'â¬†ï¸';
                color = 'text-green-400';
            } else if (pointChange < 0) {
                icon = 'â¬‡ï¸';
                color = 'text-red-400';
            } else {
                icon = 'ã€°ï¸';
            }
            
            messageText = `
            --- çµæœ ---
            ç›¸æ‰‹ã®æ­£ä½“ã¯ã€${person.name}ã€‘ã ã£ãŸï¼ ${itemTypeDescription}
            
            ${result.text}
            
            <span class="${color} font-bold">${icon} è²¢çŒ®ãƒã‚¤ãƒ³ãƒˆ: ${pointChange > 0 ? '+' : ''}${pointChange}</span>
            
            >> ${gameState.currentRound < MAX_ROUNDS ? 'æ¬¡ã®äººç‰©ã¨ã®é­é‡ã¸' : 'ä»»å‹™å®Œäº†'}
            `;
            
            // UIæ›´æ–°
            updateUI();
            showMessage(messageText);
            setButtons([
                { text: gameState.currentRound < MAX_ROUNDS ? 'æ¬¡ã«é€²ã‚€' : 'çµæœç™ºè¡¨', action: nextStep }
            ]);
        }

        // --- ã‚²ãƒ¼ãƒ çµ‚äº†ã¨çµæœç™ºè¡¨ ---

        function endGame() {
            gameState.gameActive = false;
            MESSAGE_BOX.classList.add('game-over');
            CHAR_INFO.classList.remove('police-dialogue-box', 'supreme-dialogue-box');
            
            let finalMessage = '';
            if (gameState.score >= 30) {
                finalMessage = 'ã€ä¼èª¬ã®é…é”äººã€‘: è²´æ–¹ã®åŠŸç¸¾ã¯ã€æœªæ¥ã®è‡ªç”±ã®å…‰ã¨ãªã‚Šã¾ã—ãŸã€‚è²´æ–¹ã¯çœŸã®è‹±é›„ã§ã™ã€‚';
            } else if (gameState.score >= 15) {
                finalMessage = 'ã€æ•è…•ã®é…é”äººã€‘: å¹¾å¤šã®è£åˆ‡ã‚Šã¨ç½ ã‚’é¿ã‘ã€å¤šãã®å¸Œæœ›ã‚’å±Šã‘ã¾ã—ãŸã€‚';
            } else if (gameState.score >= 0) {
                finalMessage = 'ã€å¹³å‡¡ãªé…é”äººã€‘: å±é™ºãªå¤œã‚’ãªã‚“ã¨ã‹ç”Ÿãå»¶ã³ã¾ã—ãŸã€‚æ¬¡ã¯ã‚‚ã£ã¨æ³¨æ„æ·±ãã€‚';
            } else {
                finalMessage = 'ã€å±é™ºåˆ†å­ã€‘: è²¢çŒ®ãƒã‚¤ãƒ³ãƒˆã¯ãƒã‚¤ãƒŠã‚¹ã€‚è²´æ–¹ã®æ´»å‹•ã¯é—‡ã«è‘¬ã‚‰ã‚Œã¾ã—ãŸã€‚';
            }

            showMessage(`
            --- ä»»å‹™å®Œäº† ---
            
            å…¨${MAX_ROUNDS}ãƒ©ã‚¦ãƒ³ãƒ‰ã®ä»»å‹™ãŒçµ‚äº†ã—ã¾ã—ãŸã€‚
            
            ${finalMessage}
            
            **æœ€çµ‚è²¢çŒ®ãƒã‚¤ãƒ³ãƒˆ: ${gameState.score}**
            `);
             setButtons([
                { text: 'ã‚‚ã†ä¸€åº¦ã€å¤œã‚’é§†ã‘ã‚‹', action: startGame, class: 'button-danger' }
            ]);
        }


        // é€šå¸¸ã®ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼ˆé€®æ•ã¨å‡¦åˆ‘ï¼‰
        function gameOver(personName, reason) {
            gameState.gameActive = false;
            MESSAGE_BOX.classList.add('game-over');
            CHAR_INFO.classList.remove('police-dialogue-box', 'supreme-dialogue-box');
            
            showMessage(`
            --- çµ‚ç„‰ï¼ˆé€®æ•ã¨å‡¦åˆ‘ï¼‰ ---
            
            ç›¸æ‰‹ã¯ã€${personName}ã€‘ã ã£ãŸï¼
            
            ${reason}
            
            è²´æ–¹ã®è‡ªç”±ã‚’æ±‚ã‚ã‚‹æ´»å‹•ã¯ã€æ”¿åºœã®åœ§å€’çš„ãªåŠ›ã®å‰ã«ã¤ã„ã«ã¯æ½°ãˆã€é—‡ã«æ¶ˆãˆã¾ã—ãŸã€‚
            
            **æœ€çµ‚è²¢çŒ®ãƒã‚¤ãƒ³ãƒˆ: ${gameState.score}**
            `);
             setButtons([
                { text: 'ã‚‚ã†ä¸€åº¦ã€å¤œã‚’é§†ã‘ã‚‹', action: startGame, class: 'button-danger' }
            ]);
        }
        
        // å¼·åˆ¶ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼ˆæ±æ¢è‹±æ©Ÿï¼‰
        function gameOverForce(personName, reason) {
            gameState.gameActive = false;
            MESSAGE_BOX.classList.add('game-over');
            CHAR_INFO.classList.remove('police-dialogue-box', 'supreme-dialogue-box');
            CHAR_INFO.classList.add('supreme-dialogue-box'); // æ±æ¢å°‚ç”¨ã®è±ªè¯ãªæ ã‚’æ®‹ã™

            showMessage(`
            --- çµ‚ç„‰ï¼ˆæœ€é«˜æ¨©åŠ›è€…ã®è£ãï¼‰ ---
            
            ã€é‹å‘½ã®å¼·åˆ¶åŸ·è¡Œã€‘
            
            å¤œã®æš—é—‡ã‚’è£‚ãã€ç¾ã‚ŒãŸã®ã¯ã€ã¾ã•ã‹ã®ã€${personName}ã€‘ï¼
            
            ${reason}
            
            **ã€Œè²´æ§˜ã®ã‚ˆã†ãªå›½è³Šã€ç”Ÿã‹ã—ã¦ãŠã‘ã¬ï¼ã€**
            
            æŠµæŠ—ã®ä½™åœ°ãªãã€ãã®å ´ã§å‡¦åˆ‘ãŒåŸ·è¡Œã•ã‚Œã¾ã—ãŸã€‚
            
            **æœ€çµ‚è²¢çŒ®ãƒã‚¤ãƒ³ãƒˆ: ${gameState.score}**
            `);
             setButtons([
                { text: 'ã‚‚ã†ä¸€åº¦ã€å¤œã‚’é§†ã‘ã‚‹', action: startGame, class: 'button-danger' }
            ]);
        }

        // ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«ã‚²ãƒ¼ãƒ é–‹å§‹
        window.onload = startGame;
    </script>
</body>
</html>
